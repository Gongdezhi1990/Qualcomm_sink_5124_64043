// *****************************************************************************
// Copyright (c) 2005 - 2017 Qualcomm Technologies International, Ltd.
// %%version
//
// *****************************************************************************

#ifndef SBC_GLOBAL_VARIABLES_INCLUDED
#define SBC_GLOBAL_VARIABLES_INCLUDED

// *****************************************************************************
// MODULE:
//    $sbc.variables
//
// DESCRIPTION:
//    Global variables shared between encoder and decoder. The variables and
//    tables that were used in static builds have moved to init_static_common.
//
// INPUTS:
//    N/A
//
// OUTPUTS:
//    N/A
//
// TRASHED REGISTERS:
//    N/A
//
// *****************************************************************************
.MODULE $sbc;
   .DATASEGMENT DM;

   // header constants
   .CONST        SYNC_WORD         0x9C;
   .CONST        CRC_GENPOLY       0b00011101;

   .CONST        FS_16000HZ        0;
   .CONST        FS_32000HZ        1;
   .CONST        FS_44100HZ        2;
   .CONST        FS_48000HZ        3;

   .CONST        MONO              0;
   .CONST        DUAL_CHANNEL      1;
   .CONST        STEREO            2;
   .CONST        JOINT_STEREO      3;

   .CONST        LOUDNESS          0;
   .CONST        SNR               1;





#ifndef SBC_WBS_ONLY
   // subband prototype window for M = 4
#ifdef K32
   .VAR/DMCONST      win_coefs_m4[40] =
                      0,   0.001073097952000,   0.002983767140000,   0.005467418080000,
      0.007674403860000,   0.007784102980000,   0.003731633820000,  -0.006120245720000,
      0.021827524000000,   0.040877017400000,   0.057751478400000,   0.064387858000000,
      0.051753562200000,   0.012264903720000,  -0.057643454800000,  -0.155292698800000,
      0.271186548000000,   0.389975682000000,   0.493273324000000,   0.563656406000000,
      0.588630664000000,   0.563656406000000,   0.493273324000000,   0.389975682000000,
     -0.271186548000000,  -0.155292698800000,  -0.057643454800000,   0.012264903720000,
      0.051753562200000,   0.064387858000000,   0.057751478400000,   0.040877017400000,
     -0.021827524000000,  -0.006120245720000,   0.003731633820000,   0.007784102980000,
      0.007674403860000,   0.005467418080000,   0.002983767140000,   0.001073097952000;

#else // K32
   .VAR/DMCONST_WINDOWED16      win_coefs_m4[60] =
                  0x0000,  0x0000,  0x232A,  0x0061,  0xC600,  0xB328,  0x00FB,  0x7A00,
                  0xFF12,  0x007A,  0x47FF,  0x3774,  0x02CB,  0x3F05,  0x3B75,  0x0764,
                  0x6708,  0x3DDD,  0x069F,  0xDC01,  0x91E5,  0xF89F,  0x24EC,  0x1F5E,
                  0x22B6,  0x3E31,  0xEAB9,  0x3F23,  0x9548,  0x25E5,  0x4B58,  0x4048,
                  0x25E5,  0x3F23,  0x9531,  0xEAB9,  0xDD49,  0xC2EC,  0x1F5E,  0xF89F,
                  0x2401,  0x91E5,  0x069F,  0xDC08,  0x3DDD,  0x0764,  0x6705,  0x3B75,
                  0xFD34,  0xC1FF,  0x3774,  0x007A,  0x4700,  0xFF12,  0x00FB,  0x7A00,
                  0xB328,  0x0061,  0xC600,  0x232A;
#endif // K32
#endif
   // subband prototype window for M = 8

#ifdef K32
   .VAR/DMCONST      win_coefs_m8[80] =
      0.00000000000000,    0.000626301592000,   0.001373025700000,   0.002218480808000,
      0.003295678024000,   0.004559700280000,   0.005905606760000,   0.007134869000000,
      0.008047301680000,   0.008414879560000,   0.007978182160000,   0.006466251320000,
      0.003608618008000,  -0.000715221444000,  -0.006598923920000,  -0.013988698160000,
      0.022637978920000,   0.032117646520000,   0.041833777200000,   0.050988934000000,
      0.058610105200000,   0.063618241200000,   0.064883388400000,   0.061273642400000,
      0.051748722400000,   0.035430301600000,   0.011696337680000,  -0.019663120960000,
     -0.058561630400000,  -0.104439500800000,  -0.156300552400000,  -0.212749212800000,
      0.271995772400000,   0.331939031200000,   0.390301567200000,   0.444786756000000,
      0.493058192000000,   0.533057660000000,   0.563014020000000,   0.581559388000000,
      0.587820272000000,   0.581559388000000,   0.563014020000000,   0.533057660000000,
      0.493058192000000,   0.444786756000000,   0.390301567200000,   0.331939031200000,
     -0.271995772400000,  -0.212749212800000,  -0.156300552400000,  -0.104439500800000,
     -0.058561630400000,  -0.019663120960000,   0.011696337680000,   0.035430301600000,
      0.051748722400000,   0.061273642400000,   0.064883388400000,   0.063618241200000,
      0.058610105200000,   0.050988934000000,   0.041833777200000,   0.032117646520000,
     -0.022637978920000,  -0.013988698160000,  -0.006598923920000,  -0.000715221444000,
      0.003608618008000,   0.006466251320000,   0.007978182160000,   0.008414879560000,
      0.008047301680000,   0.007134869000000,   0.005905606760000,   0.004559700280000,
      0.003295678024000,   0.002218480808000,   0.001373025700000,   0.000626301592000;
#else // K32

   .VAR/DMCONST_WINDOWED16      win_coefs_m8[120] =
                  0x0000,  0x0000,  0x1486,  0x002C,  0xFE00,  0x48B2,  0x006B,  0xFE00,
                  0x956A,  0x00C1,  0x8400,  0xE9CC,  0x0107,  0xB201,  0x13BD,  0x0105,
                  0x6E00,  0xD3E3,  0x0076,  0x3FFF,  0xE890,  0xFF27,  0xC4FE,  0x359E,
                  0x02E5,  0xCD04,  0x1C6E,  0x055A,  0xCF06,  0x86CE,  0x0780,  0x8908,
                  0x24A4,  0x084E,  0x1907,  0xD7D1,  0x069F,  0xB404,  0x88FB,  0x017F,
                  0x44FD,  0x7BAE,  0xF881,  0x0DF2,  0xA1BA,  0xEBFE,  0x58E4,  0xC4A2,
                  0x22D0,  0xC22A,  0x7CFA,  0x31F5,  0x6738,  0xEEC6,  0x3F1C,  0x8844,
                  0x3B3C,  0x4810,  0xD84A,  0x708A,  0x4B3D,  0xB24A,  0x708A,  0x4810,
                  0xD844,  0x3B3C,  0x3F1C,  0x8838,  0xEEC6,  0x31F5,  0x672A,  0x7CFA,
                  0xDD2F,  0x3EE4,  0xC4A2,  0xEBFE,  0x58F2,  0xA1BA,  0xF881,  0x0DFD,
                  0x7BAE,  0x017F,  0x4404,  0x88FB,  0x069F,  0xB407,  0xD7D1,  0x084E,
                  0x1908,  0x24A4,  0x0780,  0x8906,  0x86CE,  0x055A,  0xCF04,  0x1C6E,
                  0xFD1A,  0x33FE,  0x359E,  0xFF27,  0xC4FF,  0xE890,  0x0076,  0x3F00,
                  0xD3E3,  0x0105,  0x6E01,  0x13BD,  0x0107,  0xB200,  0xE9CC,  0x00C1,
                  0x8400,  0x956A,  0x006B,  0xFE00,  0x48B2,  0x002C,  0xFE00,  0x1486;
#endif // K32

#ifdef K32
   .BLOCK/DMCONST bitslice_lkup_block;
#else
   .BLOCK/DMCONST_WINDOWED16 bitslice_lkup_block;
#endif   

   .VAR      bitslice_lkup[66] =
                       0,       0,       0,       0,       0,       0,       0,        0,
                       0,       0,       0,       0,       0,       0,       0,        0,
                       0,       0,       0,       0,       0,       0,       0,        0,
                       0,       0,       2,       1,       1,       1,       1,        1,
                       1,       1,       1,       1,       1,       1,       1,        1,
                       1,       0,       0,       0,       0,       0,       0,        0,
                       0,       0,       0,       0,       0,       0,       0,        0,
                       0,       0,       0,       0,       0,       0,       0,        0,
                       0,       0;
   .ENDBLOCK;

   // Loudness bit allocation offset table for M = 4
   //
   //   offset4   sb=0   sb=1   sb=2   sb=3
   //  fs=16000    -1      0      0      0
   //  fs=32000    -2      0      0      1
   //  fs=44100    -2      0      0      1
   //  fs=48000    -2      0      0      1

#ifdef K32
   .BLOCK/DMCONST loudness_offset;
#else
   .BLOCK/DMCONST_WINDOWED16 loudness_offset;
#endif   

#ifndef SBC_WBS_ONLY

      .VAR       loudness_offset_m4[16] =

                 -1,    0,    0,    0,
                 -2,    0,    0,    1,
                 -2,    0,    0,    1,
                 -2,    0,    0,    1;
#endif
   // Loudness bit allocation offset table for M = 8
   //
   //  offset8     sb=0  sb=1  sb=2  sb=3  sb=4  sb=5  sb=6  sb=7
   //  fs=16000     -2,    0,    0,    0,    0,    0,    0,    1,
   //  fs=32000     -3,    0,    0,    0,    0,    0,    1,    2,
   //  fs=44100     -4,    0,    0,    0,    0,    0,    1,    2,
   //  fs=48000     -4,    0,    0,    0,    0,    0,    1,    2);

   .VAR          loudness_offset_m8[32] =

                 -2,    0,    0,    0,    0,    0,    0,    1,
                 -3,    0,    0,    0,    0,    0,    1,    2,
                 -4,    0,    0,    0,    0,    0,    1,    2,
                 -4,    0,    0,    0,    0,    0,    1,    2;

   .ENDBLOCK;


.ENDMODULE;

#endif
